<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //Array de peliculas
        let peliculas =[
            "Spider Man",
            "Superman",
            "Dragon Ball Super",
            "La era de hielo",
            "18videos",
        ]
        // Cierra el ordenador antes de irte xdddddd
        // 1. Pedir nombre al cliente.Si el nombre no es un tipo String o es nulo, debe producir un mensaje de error e insistir.
        let nombreCliente;
        do {
            nombreCliente = prompt("Introduce tu nombre:");
            if (typeof nombreCliente !== 'string' || nombreCliente === null || !isNaN(nombreCliente) || nombreCliente.trim() === "") {
            window.alert("Error: Debes introducir un nombre válido.");
            }
        } while (typeof nombreCliente !== 'string' || nombreCliente === null || !isNaN(nombreCliente) || nombreCliente.trim() === "");
            window.alert(`Bienvenido ${nombreCliente}!`);
            //FALLO: me permite poner numeros como edad

        //2. Pide la edad del cliente. Si la edad no es dato numérico o es nulo, debe producir un mensaje de error e insistir.
        let edadCliente;
        do {
            edadCliente = prompt("Introduce tu edad:");
            if (isNaN(edadCliente) || edadCliente === null || edadCliente < 0 ||edadCliente.trim() === "") {
            window.alert("Error: Debes introducir un número válido.");
            }
        } while (isNaN(edadCliente) || edadCliente === null || edadCliente < 0 || edadCliente.trim() === "");
            window.alert(`Bienvenido ${nombreCliente}! \nEdad: ${edadCliente}`);

        //3. Pide escoger el nombre de la película que está en cartelera de un listado que aparece en pantalla ('Spider Man', 'Superman', 'Dragon Ball Super', 'La era del hielo', '18videos').
        // Si el cliente escoge una película que no está en la cartelera o es nulo, debe producir un mensaje de error e insistir.
        let peliculaSeleccionada;
        do {
            peliculaSeleccionada = prompt(`Escoge una película de la cartelera:\n${peliculas.join('\n')}`);
            if (!peliculas.includes(peliculaSeleccionada)) {
                window.alert("Error: Debes escoger una película válida de la cartelera.");
            }
        } while (!peliculas.includes(peliculaSeleccionada));
        window.alert(`Has seleccionado: ${peliculaSeleccionada}`);

        //4. Si la edad del cliente es menor o igual a 17 y la película que escogió es "18videos", deberá mostrarle un mensaje de que no tiene permiso para ver esa película e insistir. Caso contrario, se realizará lo siguiente:
        if (edadCliente <= 17 && peliculaSeleccionada === "18videos") {
            window.alert("No tienes permiso para ver esta película.");
            do {
            peliculaSeleccionada = prompt(`Escoge una película de la cartelera:\n${peliculas.join('\n')}`);
            if (!peliculas.includes(peliculaSeleccionada)) {
                window.alert("Error: Debes escoger una película válida de la cartelera.");
            } else if (edadCliente <= 17 && peliculaSeleccionada === "18videos") {
                window.alert("No tienes permiso para ver esta película.");
            }
            } while (!peliculas.includes(peliculaSeleccionada) || (edadCliente <= 17 && peliculaSeleccionada === "18videos"));
        }
        window.alert(`Has seleccionado: ${peliculaSeleccionada}`);

        


    </script>
</body>
</html>