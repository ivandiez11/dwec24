<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Cines Panomales</h1>
    <script>
        
        let comidas = ["caramelos", "palomitas", "perrito"]; //Array de comidas   
        let bebidas = ["agua", "refresco"]; //Array de bebidas
        let peliculas =["Spider Man", "Superman", "Dragon Ball Super", "La era de hielo", "18videos", "a"]; //Array de peliculas
        const precioEntrada = 8.5; //Precio entrada
        
        // 1.Pedir nombre al cliente.Si el nombre no es un tipo String o es nulo, debe producir un mensaje de error e insistir.
        let nombreCliente;
        do {
            nombreCliente = prompt("Introduce tu nombre:");
            if (typeof nombreCliente !== 'string' || nombreCliente === null || !isNaN(nombreCliente) || nombreCliente.trim() === "") {
            window.alert("Error: Debes introducir un nombre válido.");
            }
        } while (typeof nombreCliente !== 'string' || nombreCliente === null || !isNaN(nombreCliente) || nombreCliente.trim() === "");

        // 2. Pide la edad del cliente. Si la edad no es dato numérico o es nulo, debe producir un mensaje de error e insistir.
        let edadCliente;
        do {
            edadCliente = prompt("Introduce tu edad:");
            if (isNaN(edadCliente) || edadCliente === null || edadCliente < 0 ||edadCliente.trim() === "") {
            window.alert("Error: Debes introducir un número válido.");
            }
        } while (isNaN(edadCliente) || edadCliente === null || edadCliente < 0 || edadCliente.trim() === "");

        // 3. Pide escoger el nombre de la película que está en cartelera de un listado que aparece en pantalla ('Spider Man', 'Superman', 'Dragon Ball Super', 'La era del hielo', '18videos').
        // Si el cliente escoge una película que no está en la cartelera o es nulo, debe producir un mensaje de error e insistir.
        let peliculaEscogida;
        do {
            peliculaEscogida = prompt("Introduce el nombre de la película que deseas ver: \n" + peliculas.join("\n"));
            if (!peliculas.includes(peliculaEscogida) || peliculaEscogida === null || peliculaEscogida.trim() === "") {
            window.alert("Error: Debes introducir un nombre de película válido.");
            }
        } while (!peliculas.includes(peliculaEscogida) || peliculaEscogida === null || peliculaEscogida.trim() === "");

        // 4.Si la edad del cliente es menor o igual a 17 y la película que escogió es "18videos", deberá mostrarle un mensaje de que no tiene permiso para ver esa película e insistir.
        // Caso contrario, se realizará lo siguiente:
           if (edadCliente <= 17 && peliculaEscogida === '18videos') {
            do {
            peliculaEscogida = prompt("Lo siento, no tienes permiso para ver esta película. \nIntroduce el nombre de la película que deseas ver: \n" + peliculas.join("\n"));
            if (!peliculas.includes(peliculaEscogida) || peliculaEscogida === null || peliculaEscogida.trim() === "") {
            window.alert("Error: Debes introducir un nombre de película válido.");
            }
            } while (edadCliente <= 17 && peliculaEscogida === '18videos' || !peliculas.includes(peliculaEscogida) || peliculaEscogida === null || peliculaEscogida.trim() === "");
            
        }

        let precioFinal = precioEntrada;
        let regalos = [];

        // 5.Si la edad del cliente es menor o igual a 17, tendrá un descuento del 50% y además tendrá de regalo incluido con la entrada: Caramelos y Refresco.
        if (edadCliente <= 17) {
            precioFinal = precioEntrada * 0.5;
            regalos.push(comidas[0]); // caramelos
            regalos.push(bebidas[1]); // refresco
            window.alert(`Tienes un descuento del 50% por ser menor de edad. El precio de la entrada es de ${precioFinal} euros. Además, tienes de regalo: ${regalos.join(", ")}.`);
        } else if (edadCliente >= 18 && edadCliente <= 25) {
            // 6.Si la edad del cliente es mayor o igual a 18 y menor o igual a 25, no tendrá descuento alguno pero si tendrá de regalo incluido con la entrada: Palomitas, perrito y refresco.
            regalos.push(comidas[1]); // palomitas
            regalos.push(comidas[2]); // perrito
            regalos.push(bebidas[1]); // refresco
            window.alert(`El precio de la entrada es de ${precioFinal} euros. Además, tienes de regalo: ${regalos.join(", ")}.`);
        } else if (edadCliente >= 26 && edadCliente <= 35) {
            // 7.Si la edad del cliente es mayor o igual a 26 y menor o igual a 35, tendrá un descuento del 10% y además tendrá de regalo incluido con la entrada: Perrito y refresco.
            precioFinal = precioEntrada * 0.9;
            regalos.push(comidas[2]); // perrito
            regalos.push(bebidas[1]); // refresco
            window.alert(`Tienes un descuento del 10%. El precio de la entrada es de ${precioFinal} euros. Además, tienes de regalo: ${regalos.join(", ")}.`);
        } else if (edadCliente >= 36) {
            // 8.Si la edad del cliente es mayor o igual a 36, tendrá un descuento del 20% y así mismo tendrá de regalo incluido con la entrada: Agua.
            precioFinal = precioEntrada * 0.8;
            regalos.push(bebidas[0]); // agua
            window.alert(`Tienes un descuento del 20%. El precio de la entrada es de ${precioFinal} euros. Además, tienes de regalo: ${regalos.join(", ")}.`);
        }

        // Imprimir en consola
        console.log(`Nombre del cliente: ${nombreCliente}`);
        console.log(`Película escogida: ${peliculaEscogida}`);
        console.log(`Lista de comidas y bebidas: ${regalos.join(", ")}`);
        console.log(`Total a pagar: ${precioFinal} euros`);

        // Imprimir en HTML
        document.body.innerHTML += `<p>Nombre del cliente: ${nombreCliente}</p>`;
        document.body.innerHTML += `<p>Película escogida: ${peliculaEscogida}</p>`;
        document.body.innerHTML += `<p>Lista de comidas y bebidas: ${regalos.join(", ")}</p>`;
        document.body.innerHTML += `<p>Total a pagar: ${precioFinal} euros</p>`;

    </script>
</body>
</html>